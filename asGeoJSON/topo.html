<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
var jqxhr = $.ajax( "topo_surf2.json" )
    .done(function(data) {
    	console.log('data loaded');
    	var topo = data; 
    	//console.log(topo);
    	var surf = topo.objects;
    	for (first in surf) break;
    	//console.log(surf[first].geometries[0].arcs);
   		geometries = surf[first].geometries
   		for(i = 0; i<geometries.length;i++){
	    	arcs = geometries[i].arcs[0];
	    	shape = "";
	    	$.each(arcs, function(index, value) {
	  				console.log(index + ': ' + value);
	  				if(value >= 0){
	  					console.log('val >= 0');
	  					arc = data.arcs[value];
	  					console.log(arc)
	  					coords = arcToCoordinates(data,arc);
	  				}
	  				else{
	  					console.log('val < 0')
	  					reverse_value = (value *-1)-1;
	  					arc = data.arcs[reverse_value];
	  					coords = arcToCoordinates(data,arc);
	  					coords.reverse();
	  				}
	  				$.each(coords, function(sindex,svaule){
	  						shape += svaule[0]+","
	  						shape += svaule[1]+","
	  				})

					});
	    		console.log(shape);
	    	}

     })
    .fail(function() { alert("error"); });

function arcToCoordinates(topology, arc) {
  var x = 0, y = 0;
  return arc.map(function(point) {
    return [
      (x += point[0]) * topology.transform.scale[0] + topology.transform.translate[0],
      (y += point[1]) * topology.transform.scale[1] + topology.transform.translate[1]
    ];
  });
}

</script>
<body>
loading topo Json
</body>

